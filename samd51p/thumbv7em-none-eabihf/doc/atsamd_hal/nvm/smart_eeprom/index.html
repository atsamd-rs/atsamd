<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="SmartEEPROM"><title>atsamd_hal::nvm::smart_eeprom - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-6b053e98.ttf.woff2,FiraSans-Italic-81dc35de.woff2,FiraSans-Regular-0fe48ade.woff2,FiraSans-MediumItalic-ccf7e434.woff2,FiraSans-Medium-e1aa3f0a.woff2,SourceCodePro-Regular-8badfe75.ttf.woff2,SourceCodePro-Semibold-aa29a496.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2" crossorigin href="../../../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../../../static.files/normalize-9960930a.css"><link rel="stylesheet" href="../../../static.files/rustdoc-6c3ea77c.css"><meta name="rustdoc-vars" data-root-path="../../../" data-static-root-path="../../../static.files/" data-current-crate="atsamd_hal" data-themes="" data-resource-suffix="" data-rustdoc-version="1.86.0 (05f9846f8 2025-03-31)" data-channel="1.86.0" data-search-js="search-581efc7a.js" data-settings-js="settings-6dad6058.js" ><script src="../../../static.files/storage-3a5871a4.js"></script><script defer src="../sidebar-items.js"></script><script defer src="../../../static.files/main-4d63596a.js"></script><noscript><link rel="stylesheet" href="../../../static.files/noscript-893ab5e7.css"></noscript><link rel="alternate icon" type="image/png" href="../../../static.files/favicon-32x32-6580c154.png"><link rel="icon" type="image/svg+xml" href="../../../static.files/favicon-044be391.svg"></head><body class="rustdoc mod"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button></nav><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../../../atsamd_hal/index.html">atsamd_<wbr>hal</a><span class="version">0.22.0</span></h2></div><div class="sidebar-elems"><section id="rustdoc-toc"><h2 class="location"><a href="#">Module smart_<wbr>eeprom</a></h2><h3><a href="#">Sections</a></h3><ul class="block top-toc"><li><a href="#smarteeprom" title="SmartEEPROM">SmartEEPROM</a></li></ul><h3><a href="#structs">Module Items</a></h3><ul class="block"><li><a href="#structs" title="Structs">Structs</a></li><li><a href="#enums" title="Enums">Enums</a></li><li><a href="#traits" title="Traits">Traits</a></li><li><a href="#types" title="Type Aliases">Type Aliases</a></li></ul></section><div id="rustdoc-modnav"><h2><a href="../index.html">In atsamd_<wbr>hal::<wbr>nvm</a></h2></div></div></nav><div class="sidebar-resizer"></div><main><div class="width-limiter"><rustdoc-search></rustdoc-search><section id="main-content" class="content"><div class="main-heading"><div class="rustdoc-breadcrumbs"><a href="../../index.html">atsamd_hal</a>::<wbr><a href="../index.html">nvm</a></div><h1>Module <span>smart_eeprom</span><button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><rustdoc-toolbar></rustdoc-toolbar><span class="sub-heading"><a class="src" href="../../../src/atsamd_hal/peripherals/nvm/smart_eeprom.rs.html#1-382">Source</a> </span></div><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><h2 id="smarteeprom"><a class="doc-anchor" href="#smarteeprom">§</a>SmartEEPROM</h2>
<p>SmartEEPROM is a feature of NVM controller that simulates a RAM-like memory
within a flash. As bits in flash cannot switch from 0 to 1 because of its
properties (whole page of memory has to erased and data has to be recopied),
SmartEEPROM introduces an indirection mechanism that handles this issue via
notion of virtual pages and it handles physical page reallocation and
erasing automatically underneath.</p>
<p>From a user perspective, SmartEEPROM behaves just like a piece of memory in
RAM but it is non-volatile. Data does not get lost between resets/power
cycles.</p>
<p>From technical standpoint, NVM controller sacrifices last
<code>2*8192*Nvmctrl.SEESTAT.SBLK</code> bytes of flash (in an inactive bank). Memory
access through flash address space will cause HardFault. All accesses has to
be conducted through SmartEEPROM specific address space.</p>
<p>Prerequisites:
Both <code>Nvmctrl.SEESTAT.{SBLK,PSZ}</code> (block size, virtual page size) are being
populated from proper bits in NVM controller user page on power-on-reset. By
default, <code>SBLK</code> property is set to <code>0</code>, effectively disabling SmartEEPROM.</p>
<p>One of possible safe ways to change user page content is to use <code>OpenOCD</code>
custom commands. <code>atsame5x</code>’s <code>OpenOCD</code> driver supports <code>atsame5 userpage</code>
command. To access it from GDB, it has to be preceded with a <code>monitor</code>
clause.</p>
<p>To access <a href="struct.SmartEeprom.html" title="struct atsamd_hal::nvm::smart_eeprom::SmartEeprom"><code>SmartEeprom</code></a> struct, call <a href="../struct.Nvm.html#method.smart_eeprom" title="method atsamd_hal::nvm::Nvm::smart_eeprom"><code>Nvm::smart_eeprom</code></a> method to
retrieve its instance.</p>
</div></details><h2 id="structs" class="section-header">Structs<a href="#structs" class="anchor">§</a></h2><dl class="item-table"><dt><a class="struct" href="struct.SmartEeprom.html" title="struct atsamd_hal::nvm::smart_eeprom::SmartEeprom">Smart<wbr>Eeprom</a></dt><dd>Struct representing a SmartEEPROM instance.</dd><dt><a class="struct" href="struct.SmartEepromIter.html" title="struct atsamd_hal::nvm::smart_eeprom::SmartEepromIter">Smart<wbr>Eeprom<wbr>Iter</a></dt><dd>A type representing an immutable iterator over SmartEEPROM address space</dd><dt><a class="struct" href="struct.SmartEepromIterMut.html" title="struct atsamd_hal::nvm::smart_eeprom::SmartEepromIterMut">Smart<wbr>Eeprom<wbr>Iter<wbr>Mut</a></dt><dd>A type representing a mutable iterator over SmartEEPROM address space</dd></dl><h2 id="enums" class="section-header">Enums<a href="#enums" class="anchor">§</a></h2><dl class="item-table"><dt><a class="enum" href="enum.Locked.html" title="enum atsamd_hal::nvm::smart_eeprom::Locked">Locked</a></dt><dd>Type-level enum variant representing a locked state of SmartEEPROM. In that
state, only read operations are permitted</dd><dt><a class="enum" href="enum.SmartEepromMode.html" title="enum atsamd_hal::nvm::smart_eeprom::SmartEepromMode">Smart<wbr>Eeprom<wbr>Mode</a></dt><dd>Enum encapsulating different modes SmartEEPROM can be in.</dd><dt><a class="enum" href="enum.SmartEepromRetrievalFailure.html" title="enum atsamd_hal::nvm::smart_eeprom::SmartEepromRetrievalFailure">Smart<wbr>Eeprom<wbr>Retrieval<wbr>Failure</a></dt><dd>Enum representing possible failure modes of SmartEEPROM while its state is
being retrieved from HW registers.</dd><dt><a class="enum" href="enum.Unlocked.html" title="enum atsamd_hal::nvm::smart_eeprom::Unlocked">Unlocked</a></dt><dd>Type-level enum variant representing an unlocked state of SmartEEPROM. In
that state, both read and write operations are permitted</dd></dl><h2 id="traits" class="section-header">Traits<a href="#traits" class="anchor">§</a></h2><dl class="item-table"><dt><a class="trait" href="trait.SmartEepromPointableSize.html" title="trait atsamd_hal::nvm::smart_eeprom::SmartEepromPointableSize">Smart<wbr>Eeprom<wbr>Pointable<wbr>Size</a></dt><dd>Trait generalizing over primitive types that are permitted to be used as
slice backing types</dd><dt><a class="trait" href="trait.SmartEepromState.html" title="trait atsamd_hal::nvm::smart_eeprom::SmartEepromState">Smart<wbr>Eeprom<wbr>State</a></dt><dd>Trait generalizing over a state of an SmartEEPROM</dd></dl><h2 id="types" class="section-header">Type Aliases<a href="#types" class="anchor">§</a></h2><dl class="item-table"><dt><a class="type" href="type.Result.html" title="type atsamd_hal::nvm::smart_eeprom::Result">Result</a></dt><dd>Type alias for locally used <a href="type.Result.html" title="type atsamd_hal::nvm::smart_eeprom::Result"><code>Result</code></a> type.</dd></dl></section></div></main></body></html>