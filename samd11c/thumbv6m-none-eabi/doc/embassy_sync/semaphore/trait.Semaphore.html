<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="An asynchronous semaphore."><title>Semaphore in embassy_sync::semaphore - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-6b053e98.ttf.woff2,FiraSans-Italic-81dc35de.woff2,FiraSans-Regular-0fe48ade.woff2,FiraSans-MediumItalic-ccf7e434.woff2,FiraSans-Medium-e1aa3f0a.woff2,SourceCodePro-Regular-8badfe75.ttf.woff2,SourceCodePro-Semibold-aa29a496.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../../static.files/normalize-9960930a.css"><link rel="stylesheet" href="../../static.files/rustdoc-6c3ea77c.css"><meta name="rustdoc-vars" data-root-path="../../" data-static-root-path="../../static.files/" data-current-crate="embassy_sync" data-themes="" data-resource-suffix="" data-rustdoc-version="1.86.0 (05f9846f8 2025-03-31)" data-channel="1.86.0" data-search-js="search-581efc7a.js" data-settings-js="settings-6dad6058.js" ><script src="../../static.files/storage-3a5871a4.js"></script><script defer src="sidebar-items.js"></script><script defer src="../../static.files/main-4d63596a.js"></script><noscript><link rel="stylesheet" href="../../static.files/noscript-893ab5e7.css"></noscript><link rel="alternate icon" type="image/png" href="../../static.files/favicon-32x32-6580c154.png"><link rel="icon" type="image/svg+xml" href="../../static.files/favicon-044be391.svg"></head><body class="rustdoc trait"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button></nav><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../../embassy_sync/index.html">embassy_<wbr>sync</a><span class="version">0.6.2</span></h2></div><div class="sidebar-elems"><section id="rustdoc-toc"><h2 class="location"><a href="#">Semaphore</a></h2><h3><a href="#required-associated-types">Required Associated Types</a></h3><ul class="block"><li><a href="#associatedtype.Error" title="Error">Error</a></li></ul><h3><a href="#required-methods">Required Methods</a></h3><ul class="block"><li><a href="#tymethod.acquire" title="acquire">acquire</a></li><li><a href="#tymethod.acquire_all" title="acquire_all">acquire_all</a></li><li><a href="#tymethod.release" title="release">release</a></li><li><a href="#tymethod.set" title="set">set</a></li><li><a href="#tymethod.try_acquire" title="try_acquire">try_acquire</a></li><li><a href="#tymethod.try_acquire_all" title="try_acquire_all">try_acquire_all</a></li></ul><h3><a href="#dyn-compatibility">Dyn Compatibility</a></h3><h3><a href="#implementors">Implementors</a></h3></section><div id="rustdoc-modnav"><h2><a href="index.html">In embassy_<wbr>sync::<wbr>semaphore</a></h2></div></div></nav><div class="sidebar-resizer"></div><main><div class="width-limiter"><rustdoc-search></rustdoc-search><section id="main-content" class="content"><div class="main-heading"><div class="rustdoc-breadcrumbs"><a href="../index.html">embassy_sync</a>::<wbr><a href="index.html">semaphore</a></div><h1>Trait <span class="trait">Semaphore</span><button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><rustdoc-toolbar></rustdoc-toolbar><span class="sub-heading"><a class="src" href="../../src/embassy_sync/semaphore.rs.html#18-44">Source</a> </span></div><pre class="rust item-decl"><code>pub trait Semaphore: <a class="trait" href="https://doc.rust-lang.org/1.86.0/core/marker/trait.Sized.html" title="trait core::marker::Sized">Sized</a> {
    type <a href="#associatedtype.Error" class="associatedtype">Error</a>;

    // Required methods
    async fn <a href="#tymethod.acquire" class="fn">acquire</a>(
        &amp;self,
        permits: <a class="primitive" href="https://doc.rust-lang.org/1.86.0/core/primitive.usize.html">usize</a>,
    ) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.86.0/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="struct" href="struct.SemaphoreReleaser.html" title="struct embassy_sync::semaphore::SemaphoreReleaser">SemaphoreReleaser</a>&lt;'_, Self&gt;, Self::<a class="associatedtype" href="trait.Semaphore.html#associatedtype.Error" title="type embassy_sync::semaphore::Semaphore::Error">Error</a>&gt;;
<span class="item-spacer"></span>    fn <a href="#tymethod.try_acquire" class="fn">try_acquire</a>(&amp;self, permits: <a class="primitive" href="https://doc.rust-lang.org/1.86.0/core/primitive.usize.html">usize</a>) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.86.0/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="struct" href="struct.SemaphoreReleaser.html" title="struct embassy_sync::semaphore::SemaphoreReleaser">SemaphoreReleaser</a>&lt;'_, Self&gt;&gt;;
<span class="item-spacer"></span>    async fn <a href="#tymethod.acquire_all" class="fn">acquire_all</a>(
        &amp;self,
        min: <a class="primitive" href="https://doc.rust-lang.org/1.86.0/core/primitive.usize.html">usize</a>,
    ) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.86.0/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="struct" href="struct.SemaphoreReleaser.html" title="struct embassy_sync::semaphore::SemaphoreReleaser">SemaphoreReleaser</a>&lt;'_, Self&gt;, Self::<a class="associatedtype" href="trait.Semaphore.html#associatedtype.Error" title="type embassy_sync::semaphore::Semaphore::Error">Error</a>&gt;;
<span class="item-spacer"></span>    fn <a href="#tymethod.try_acquire_all" class="fn">try_acquire_all</a>(&amp;self, min: <a class="primitive" href="https://doc.rust-lang.org/1.86.0/core/primitive.usize.html">usize</a>) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.86.0/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="struct" href="struct.SemaphoreReleaser.html" title="struct embassy_sync::semaphore::SemaphoreReleaser">SemaphoreReleaser</a>&lt;'_, Self&gt;&gt;;
<span class="item-spacer"></span>    fn <a href="#tymethod.release" class="fn">release</a>(&amp;self, permits: <a class="primitive" href="https://doc.rust-lang.org/1.86.0/core/primitive.usize.html">usize</a>);
<span class="item-spacer"></span>    fn <a href="#tymethod.set" class="fn">set</a>(&amp;self, permits: <a class="primitive" href="https://doc.rust-lang.org/1.86.0/core/primitive.usize.html">usize</a>);
}</code></pre><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>An asynchronous semaphore.</p>
<p>A semaphore tracks a number of permits, typically representing a pool of shared resources.
Users can acquire permits to synchronize access to those resources. The semaphore does not
contain the resources themselves, only the count of available permits.</p>
</div></details><h2 id="required-associated-types" class="section-header">Required Associated Types<a href="#required-associated-types" class="anchor">§</a></h2><div class="methods"><details class="toggle" open><summary><section id="associatedtype.Error" class="method"><a class="src rightside" href="../../src/embassy_sync/semaphore.rs.html#20">Source</a><h4 class="code-header">type <a href="#associatedtype.Error" class="associatedtype">Error</a></h4></section></summary><div class="docblock"><p>The error returned when the semaphore is unable to acquire the requested permits.</p>
</div></details></div><h2 id="required-methods" class="section-header">Required Methods<a href="#required-methods" class="anchor">§</a></h2><div class="methods"><details class="toggle method-toggle" open><summary><section id="tymethod.acquire" class="method"><a class="src rightside" href="../../src/embassy_sync/semaphore.rs.html#23">Source</a><h4 class="code-header">async fn <a href="#tymethod.acquire" class="fn">acquire</a>(
    &amp;self,
    permits: <a class="primitive" href="https://doc.rust-lang.org/1.86.0/core/primitive.usize.html">usize</a>,
) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.86.0/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="struct" href="struct.SemaphoreReleaser.html" title="struct embassy_sync::semaphore::SemaphoreReleaser">SemaphoreReleaser</a>&lt;'_, Self&gt;, Self::<a class="associatedtype" href="trait.Semaphore.html#associatedtype.Error" title="type embassy_sync::semaphore::Semaphore::Error">Error</a>&gt;</h4></section></summary><div class="docblock"><p>Asynchronously acquire one or more permits from the semaphore.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="tymethod.try_acquire" class="method"><a class="src rightside" href="../../src/embassy_sync/semaphore.rs.html#26">Source</a><h4 class="code-header">fn <a href="#tymethod.try_acquire" class="fn">try_acquire</a>(&amp;self, permits: <a class="primitive" href="https://doc.rust-lang.org/1.86.0/core/primitive.usize.html">usize</a>) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.86.0/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="struct" href="struct.SemaphoreReleaser.html" title="struct embassy_sync::semaphore::SemaphoreReleaser">SemaphoreReleaser</a>&lt;'_, Self&gt;&gt;</h4></section></summary><div class="docblock"><p>Try to immediately acquire one or more permits from the semaphore.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="tymethod.acquire_all" class="method"><a class="src rightside" href="../../src/embassy_sync/semaphore.rs.html#34">Source</a><h4 class="code-header">async fn <a href="#tymethod.acquire_all" class="fn">acquire_all</a>(
    &amp;self,
    min: <a class="primitive" href="https://doc.rust-lang.org/1.86.0/core/primitive.usize.html">usize</a>,
) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.86.0/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="struct" href="struct.SemaphoreReleaser.html" title="struct embassy_sync::semaphore::SemaphoreReleaser">SemaphoreReleaser</a>&lt;'_, Self&gt;, Self::<a class="associatedtype" href="trait.Semaphore.html#associatedtype.Error" title="type embassy_sync::semaphore::Semaphore::Error">Error</a>&gt;</h4></section></summary><div class="docblock"><p>Asynchronously acquire all permits controlled by the semaphore.</p>
<p>This method will wait until at least <code>min</code> permits are available, then acquire all available permits
from the semaphore. Note that other tasks may have already acquired some permits which could be released
back to the semaphore at any time. The number of permits actually acquired may be determined by calling
<a href="struct.SemaphoreReleaser.html#method.permits" title="method embassy_sync::semaphore::SemaphoreReleaser::permits"><code>SemaphoreReleaser::permits</code></a>.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="tymethod.try_acquire_all" class="method"><a class="src rightside" href="../../src/embassy_sync/semaphore.rs.html#37">Source</a><h4 class="code-header">fn <a href="#tymethod.try_acquire_all" class="fn">try_acquire_all</a>(&amp;self, min: <a class="primitive" href="https://doc.rust-lang.org/1.86.0/core/primitive.usize.html">usize</a>) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.86.0/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="struct" href="struct.SemaphoreReleaser.html" title="struct embassy_sync::semaphore::SemaphoreReleaser">SemaphoreReleaser</a>&lt;'_, Self&gt;&gt;</h4></section></summary><div class="docblock"><p>Try to immediately acquire all available permits from the semaphore, if at least <code>min</code> permits are available.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="tymethod.release" class="method"><a class="src rightside" href="../../src/embassy_sync/semaphore.rs.html#40">Source</a><h4 class="code-header">fn <a href="#tymethod.release" class="fn">release</a>(&amp;self, permits: <a class="primitive" href="https://doc.rust-lang.org/1.86.0/core/primitive.usize.html">usize</a>)</h4></section></summary><div class="docblock"><p>Release <code>permits</code> back to the semaphore, making them available to be acquired.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="tymethod.set" class="method"><a class="src rightside" href="../../src/embassy_sync/semaphore.rs.html#43">Source</a><h4 class="code-header">fn <a href="#tymethod.set" class="fn">set</a>(&amp;self, permits: <a class="primitive" href="https://doc.rust-lang.org/1.86.0/core/primitive.usize.html">usize</a>)</h4></section></summary><div class="docblock"><p>Reset the number of available permints in the semaphore to <code>permits</code>.</p>
</div></details></div><h2 id="dyn-compatibility" class="section-header">Dyn Compatibility<a href="#dyn-compatibility" class="anchor">§</a></h2><div class="dyn-compatibility-info"><p>This trait is <b>not</b> <a href="https://doc.rust-lang.org/1.86.0/reference/items/traits.html#dyn-compatibility">dyn compatible</a>.</p><p><i>In older versions of Rust, dyn compatibility was called "object safety", so this trait is not object safe.</i></p></div><h2 id="implementors" class="section-header">Implementors<a href="#implementors" class="anchor">§</a></h2><div id="implementors-list"><details class="toggle implementors-toggle"><summary><section id="impl-Semaphore-for-GreedySemaphore%3CM%3E" class="impl"><a class="src rightside" href="../../src/embassy_sync/semaphore.rs.html#136-182">Source</a><a href="#impl-Semaphore-for-GreedySemaphore%3CM%3E" class="anchor">§</a><h3 class="code-header">impl&lt;M: <a class="trait" href="../blocking_mutex/raw/trait.RawMutex.html" title="trait embassy_sync::blocking_mutex::raw::RawMutex">RawMutex</a>&gt; <a class="trait" href="trait.Semaphore.html" title="trait embassy_sync::semaphore::Semaphore">Semaphore</a> for <a class="struct" href="struct.GreedySemaphore.html" title="struct embassy_sync::semaphore::GreedySemaphore">GreedySemaphore</a>&lt;M&gt;</h3></section></summary><div class="impl-items"><section id="associatedtype.Error-1" class="associatedtype trait-impl"><a class="src rightside" href="../../src/embassy_sync/semaphore.rs.html#137">Source</a><a href="#associatedtype.Error-1" class="anchor">§</a><h4 class="code-header">type <a href="#associatedtype.Error" class="associatedtype">Error</a> = <a class="enum" href="https://doc.rust-lang.org/1.86.0/core/convert/enum.Infallible.html" title="enum core::convert::Infallible">Infallible</a></h4></section></div></details><details class="toggle implementors-toggle"><summary><section id="impl-Semaphore-for-FairSemaphore%3CM,+N%3E" class="impl"><a class="src rightside" href="../../src/embassy_sync/semaphore.rs.html#290-342">Source</a><a href="#impl-Semaphore-for-FairSemaphore%3CM,+N%3E" class="anchor">§</a><h3 class="code-header">impl&lt;M: <a class="trait" href="../blocking_mutex/raw/trait.RawMutex.html" title="trait embassy_sync::blocking_mutex::raw::RawMutex">RawMutex</a>, const N: <a class="primitive" href="https://doc.rust-lang.org/1.86.0/core/primitive.usize.html">usize</a>&gt; <a class="trait" href="trait.Semaphore.html" title="trait embassy_sync::semaphore::Semaphore">Semaphore</a> for <a class="struct" href="struct.FairSemaphore.html" title="struct embassy_sync::semaphore::FairSemaphore">FairSemaphore</a>&lt;M, N&gt;</h3></section></summary><div class="impl-items"><section id="associatedtype.Error-2" class="associatedtype trait-impl"><a class="src rightside" href="../../src/embassy_sync/semaphore.rs.html#291">Source</a><a href="#associatedtype.Error-2" class="anchor">§</a><h4 class="code-header">type <a href="#associatedtype.Error" class="associatedtype">Error</a> = <a class="struct" href="struct.WaitQueueFull.html" title="struct embassy_sync::semaphore::WaitQueueFull">WaitQueueFull</a></h4></section></div></details></div><script src="../../trait.impl/embassy_sync/semaphore/trait.Semaphore.js" async></script></section></div></main></body></html>